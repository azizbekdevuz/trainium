@import "tailwindcss";

/* Force dark variant to be class-scoped regardless of OS preference */
@custom-variant dark (&:where(.dark, .dark *));

/* =========================================
   1. RESPONSIVE FALLBACKS (no JS needed)
========================================= */
@media (max-width: 768px) {
  .mobile-only     { display: block !important; }
  .desktop-only    { display: none !important; }
  .mobile-nav      { display: flex !important; }
  .desktop-nav     { display: none !important; }

  /* mobile menu viewport safety */
  .mobile-menu-container {
    max-height: 100vh;
    max-height: 100dvh;
    overflow: hidden;
  }
  .mobile-menu-content {
    max-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    max-height: calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  }
  .mobile-menu-scrollable {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
}

@media (min-width: 769px) {
  .mobile-only     { display: none !important; }
  .desktop-only    { display: block !important; }
  .mobile-nav      { display: none !important; }
  .desktop-nav     { display: flex !important; }
}

/* =========================================
   2. DESIGN TOKENS
   Light = default on :root
   Dark  = override on .dark
========================================= */

/* z-index scale so we stop scattering !important everywhere */
:root {
  --z-header: 30;
  --z-overlay: 80;
  --z-modal: 90;
}

@theme {
  --font-sans: var(--font-inter), ui-sans-serif, system-ui, sans-serif;
  --font-display: var(--font-space), var(--font-sans);

  /* Neutral surfaces */
  --color-bg:         248 250 252; /* slate-50 */
  --color-fg:         15 23 42;    /* slate-900 */
  --color-card:       255 255 255; /* white */
  --color-muted:      241 245 249; /* slate-100 */
  --color-border:     226 232 240; /* slate-200 */

  /* Accent / brand */
  --color-primary:     14 165 233;  /* cyan-500 */
  --color-primary-ink: 8 145 178;   /* cyan-600 */
  --color-glow:        34 211 238;  /* cyan-400 */

  --radius-lg: 1.25rem;

  /* Semantic soft surfaces (light mode) */
  --surface-info-soft:    240 249 255; /* sky-50 */
  --surface-success-soft: 240 253 244; /* emerald-50 */
  --surface-warn-soft:    254 252 232; /* yellow-50 */
  --surface-danger-soft:  254 242 242; /* red-50 */

  /* Dark mode overrides will redefine these below */
}

/* Force site to prefer light unless .dark is explicitly set */
:root { color-scheme: light; }

@media (prefers-color-scheme: dark) {
  html:not(.dark) { color-scheme: light !important; }
}

/* Dark theme tokens */
.dark {
  --color-bg:         2 6 23;      /* slate-950 */
  --color-fg:         241 245 249; /* slate-100 */
  --color-card:       15 23 42;    /* slate-900 */
  --color-muted:      3 7 18;
  --color-border:     30 41 59;    /* slate-700 */

  --color-primary:     34 211 238; /* cyan-400 */
  --color-primary-ink: 6 182 212;  /* cyan-500 */
  --color-glow:        14 165 233; /* cyan-500 */

  /* Dark semantic soft surfaces:
     These replace all your "bg-*-50 in dark mode becomes random slate".
     Use them to keep status pills readable and still distinct. */
  --surface-info-soft:    30 41 59;  /* slate-700-ish w/ cyan hint */
  --surface-success-soft: 22 27 34;  /* near-slate w/ green hint */
  --surface-warn-soft:    41 37 16;  /* warm deep amber/olive */
  --surface-danger-soft:  45 13 13;  /* deep red */
  --surface-neutral-soft: 30 41 59;  /* generic pill */

  color-scheme: dark;
}

/* =========================================
   3. GLOBAL BACKGROUND + TYPOGRAPHY
========================================= */

html, body { height: 100%; overflow-x: hidden; }

body {
  background:
    radial-gradient(1200px 600px at 80% -10%, rgba(var(--color-glow),0.08), transparent 60%),
    radial-gradient(800px 400px at 10% 0%, rgba(99,102,241,0.08), transparent 60%),
    linear-gradient(180deg,
      rgba(var(--color-card),1),
      rgba(var(--color-bg),1)
    );
  color: rgb(var(--color-fg));
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

.dark body {
  background:
    radial-gradient(1200px 600px at 80% -10%, rgba(var(--color-glow),0.12), transparent 60%),
    radial-gradient(800px 400px at 10% 0%, rgba(14,165,233,0.10), transparent 60%),
    linear-gradient(180deg, rgb(2 6 23), rgb(2 6 23));
}

/* soft grid overlay */
.body-grid::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image:
    linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px);
  background-size: 48px 48px;
  opacity: .06;
  mix-blend-mode: multiply;
  z-index: 0;
}

/* glass cards */
.glass {
  background: rgba(var(--color-card), .8);
  backdrop-filter: saturate(140%) blur(6px);
  border: 1px solid rgb(var(--color-border));
  border-radius: var(--radius-lg);
}

/* =========================================
   4. DARK BRIDGE
   Map common "light" utility classes to dark tokens.
   THIS is where we control Tailwind's defaults globally.
========================================= */

/* Surfaces that were hardcoded light in components */
.dark .bg-white,
.dark .bg-gray-50,
.dark .bg-slate-50,
.dark .bg-slate-100,
.dark .bg-gray-100,
.dark .bg-gray-200,
.dark .bg-gray-300,
.dark .bg-slate-200,
.dark .bg-slate-300 {
  background-color: rgb(var(--color-card)) !important;
}

/* Borders that were assuming light theme */
.dark .border-gray-100,
.dark .border-gray-200,
.dark .border-gray-300,
.dark .border-slate-100,
.dark .border-slate-200,
.dark .border-slate-300 {
  border-color: rgb(var(--color-border)) !important;
}

/* Text utilities smashed to one readable foreground */
.dark .text-gray-900,
.dark .text-gray-800,
.dark .text-gray-700,
.dark .text-gray-600,
.dark .text-gray-500,
.dark .text-gray-400,
.dark .text-gray-300,
.dark .text-black,
.dark .text-white,
.dark .text-slate-900,
.dark .text-slate-800,
.dark .text-slate-700,
.dark .text-slate-600,
.dark .text-slate-500 {
  color: rgb(var(--color-fg)) !important;
}

/* Exception for "muted on dark backgrounds" */
.dark .text-gray-100 {
  color: rgb(36 38 42) !important;
}

/* Status pills / badges (unread, etc.)
   Use semantic tokens instead of one generic slate blob */
.dark .bg-blue-50,
.dark .bg-blue-100,
.dark .text-blue-800,
.dark .text-blue-700 {
  background-color: rgb(var(--surface-info-soft)) !important;
  color: rgb(226 232 240) !important;
}

.dark .bg-green-50,
.dark .bg-green-100,
.dark .text-green-800,
.dark .text-green-700 {
  background-color: rgb(var(--surface-success-soft)) !important;
  color: rgb(226 232 240) !important;
}

.dark .bg-yellow-50,
.dark .bg-yellow-100,
.dark .text-yellow-800,
.dark .text-yellow-700 {
  background-color: rgb(var(--surface-warn-soft)) !important;
  color: rgb(226 232 240) !important;
}

.dark .bg-red-100,
.dark .text-red-800,
.dark .text-red-700 {
  background-color: rgb(var(--surface-danger-soft)) !important;
  color: rgb(226 232 240) !important;
}

/* Generic pale backgrounds that aren't mapped above */
.dark .bg-purple-100,
.dark .bg-indigo-100,
.dark .bg-cyan-100,
.dark .bg-gray-100,
.dark .bg-cyan-50 {
  background-color: rgb(var(--surface-neutral-soft)) !important;
  color: rgb(226 232 240) !important;
}

/* Gradients that assume "from-...50 to-white" */
.dark .from-cyan-50,
.dark .from-blue-50,
.dark .from-emerald-50,
.dark .from-indigo-50 {
  --tw-gradient-from: rgb(2 6 23);
  --tw-gradient-to: rgb(2 6 23 / 0);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
}
.dark .to-blue-50,
.dark .to-cyan-50,
.dark .to-white {
  --tw-gradient-to: rgb(2 6 23);
}

/* Shadow tuning for dark */
.dark .shadow {
  box-shadow:
    0 1px 2px 0 rgba(0,0,0,.6),
    0 1px 3px 1px rgba(0,0,0,.4) !important;
}

/* Typography inside prose blocks */
.dark .prose :where(p, h1, h2, h3, h4, h5, h6, strong) {
  color: rgb(var(--color-fg));
}

/* Form elements in dark */
.dark input,
.dark textarea,
.dark select {
  background-color: rgb(15 23 42) !important;
  color: rgb(241 245 249) !important;
  border-color: rgb(51 65 85) !important;
}
.dark input::placeholder,
.dark textarea::placeholder {
  color: rgb(100 116 139) !important;
}
.dark label { color: rgb(226 232 240) !important; }
.dark fieldset { border-color: rgb(51 65 85) !important; }
.dark hr { border-color: rgb(30 41 59) !important; }

/* =========================================
   5. INTERACTION / ANIMATION SYSTEM
   (deduped, consistent)
========================================= */

/* shared selection highlight */
::selection {
  background-color: rgba(var(--color-primary), .25);
}
.dark ::selection {
  background-color: rgba(6, 182, 212, .35);
}

/* Motion baseline */
a,
button {
  transition:
    transform .2s ease,
    box-shadow .2s ease,
    background .2s ease,
    filter .2s ease;
}

.hover-raise:hover {
  transform: translateY(-2px);
}

a:hover,
button:hover {
  filter: saturate(110%);
}
a:active,
button:active {
  transform: translateY(1px) scale(0.995);
}

/* Premium CTA shimmer sweep */
.btn-enhanced {
  position: relative;
  overflow: hidden;
}
.btn-enhanced::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
  transition: left 0.5s;
}
.btn-enhanced:hover::before {
  left: 100%;
}

/* Card hover */
.card-hover {
  transition: all 0.2s ease;
}
.card-hover:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}
.dark .card-hover:hover {
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

/* Loading shimmer skeletons */
.loading-shimmer {
  background: linear-gradient(
    90deg,
    rgba(var(--color-muted), 0.4) 25%,
    rgba(var(--color-muted), 0.8) 50%,
    rgba(var(--color-muted), 0.4) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* =========================================
   5A. RESPONSIVE CONTENT SAFETY (mobile)
   Prevent horizontal overflow from long unbroken content
========================================= */

/* Reviews section: force safe wrapping and contain overflow */
#reviews { overflow-x: hidden; }
#reviews p,
#reviews li,
#reviews div {
  overflow-wrap: anywhere;
  word-break: break-word;
}

@keyframes shimmer {
  0%   { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Scroll-driven glow (progressive enhancement) */
@supports (animation-timeline: scroll()) {
  @keyframes slideGlow {
    from { transform: translateX(-20%); opacity: .15; }
    to   { transform: translateX(20%);  opacity: .35; }
  }
  .scroll-glow {
    background: radial-gradient(
      300px 120px at 50% 50%,
      rgba(var(--color-glow),.35),
      transparent 60%
    );
    filter: blur(12px);
    animation: slideGlow 1 linear both;
    animation-timeline: scroll();
    animation-range: entry 20% exit 80%;
    will-change: transform, opacity;
  }
}

/* Reduced motion aware micro-animations */
@media (prefers-reduced-motion: no-preference) {
  .animate-fade    { animation: fade 0.35s ease-out both; }
  .animate-fade-up { animation: fade-up 0.38s ease-out both; }
  .animate-bounce-soft { animation: bounce-soft .38s ease-out both; }
}

@keyframes fade {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes fade-up {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes bounce-soft {
  0%   { transform: scale(.8); opacity:.7; }
  60%  { transform: scale(1.08); opacity:1; }
  100% { transform: scale(1); }
}

/* Dashboard / Feature entrance */
@keyframes fade-in-up {
  from { opacity: 0; transform: translateY(30px); }
  to   { opacity: 1; transform: translateY(0); }
}
.animate-fade-in-up {
  animation: fade-in-up 0.6s ease-out both;
}
@keyframes slide-in-right {
  from { opacity: 0; transform: translateX(20px); }
  to   { opacity: 1; transform: translateX(0); }
}
.animate-slide-in-right {
  animation: slide-in-right 0.3s ease-out both;
}
@keyframes scale-in {
  from { opacity: 0; transform: scale(0.95); }
  to   { opacity: 1; transform: scale(1); }
}
.animate-scale-in {
  animation: scale-in 0.2s ease-out both;
}

/* “Mascot” / face animations */
@keyframes face-bounce {
  0%, 100% { transform: translateY(0) scale(1); }
  50%      { transform: translateY(-4px) scale(1.05); }
}

/* =========================================
   5B. DEV FOOTER STYLES (subtle, performant)
========================================= */

.social-link {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 34px;
  height: 34px;
  border-radius: 9999px;
  border: 1px solid rgb(var(--color-border));
  background: rgba(var(--color-card), .9);
  flex-shrink: 0;
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
}
.social-link:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 18px rgba(0,0,0,.06);
  border-color: rgba(var(--color-primary), .4);
}
.dark .social-link:hover {
  box-shadow: 0 6px 18px rgba(0,0,0,.25);
}

.dev-underline { position: relative; padding-bottom: 2px; }
@media (prefers-reduced-motion: no-preference) {
  .dev-underline::after {
    content: "";
    position: absolute;
    left: 0; right: 0; bottom: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, rgba(var(--color-glow), .7), transparent);
    background-size: 200% 100%;
    animation: devShimmer 2.4s linear infinite;
  }
  @keyframes devShimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }
}

/* High‑tech holo border (very light) */
.holo {
  position: relative;
  background-clip: padding-box;
}
.holo::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1px;
  background: conic-gradient(from 180deg,
    rgba(14,165,233,.35), rgba(99,102,241,.25), rgba(14,165,233,.35));
  mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  pointer-events: none;
  opacity: .6;
}

/* Cyber role chip */
.cyber-chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  height: 24px;
  border-radius: 9999px;
  border: 1px solid rgb(var(--color-border));
  padding: 0 10px;
  font-size: 11px;
  background: linear-gradient(180deg,rgba(var(--color-card), .95), rgba(var(--color-muted), .7));
  color: rgb(14 116 144);
  max-width: min(60vw, 220px);
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.dark .cyber-chip { color: rgb(125 211 252); }

/* Minimal status pulse */
.status-pulse { width: 6px; height: 6px; border-radius: 9999px; background: rgb(34 211 238); box-shadow: 0 0 0 0 rgba(34,211,238,.6); }
@media (prefers-reduced-motion: no-preference) {
  .status-pulse { animation: statusPulse 1.8s ease-out infinite; }
  @keyframes statusPulse {
    0% { box-shadow: 0 0 0 0 rgba(34,211,238,.6); }
    70% { box-shadow: 0 0 0 10px rgba(34,211,238,0); }
    100% { box-shadow: 0 0 0 0 rgba(34,211,238,0); }
  }
}

/* Footer developer details collapse */
.dev-details {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: max-height .35s ease, opacity .25s ease;
}
.dev-details.open {
  max-height: 640px; /* enough for content; keeps perf simple */
  opacity: 1;
}
@keyframes face-pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50%      { transform: scale(1.1); opacity: 0.8; }
}
@keyframes face-wiggle {
  0%,100% { transform: rotate(0deg); }
  25%     { transform: rotate(-5deg); }
  75%     { transform: rotate(5deg); }
}
.animate-face-bounce { animation: face-bounce 0.6s ease-in-out both; }
.animate-face-pulse  { animation: face-pulse 0.8s ease-in-out both; }
.animate-face-wiggle { animation: face-wiggle 0.5s ease-in-out both; }

/* =========================================
   6. ADMIN / LAYERS / MODALS / FOCUS
========================================= */

/* Admin panel glass gradient */
.admin-panel {
  background: linear-gradient(
    135deg,
    rgba(var(--color-card), 0.8),
    rgba(var(--color-bg), 0.9)
  );
  backdrop-filter: blur(10px);
  border: 1px solid rgba(var(--color-border), 0.5);
}

/* Smooth transitions for admin widgets */
.admin-transition {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Focus elevation for form fields */
.form-focus {
  transition: all 0.2s ease;
}
.form-focus:focus {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(var(--color-primary), 0.15);
}

/* Status indicator dots */
.status-indicator {
  position: relative;
}
.status-indicator::before {
  content: '';
  position: absolute;
  top: 50%;
  left: -8px;
  transform: translateY(-50%);
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: currentColor;
}

/* Modal layering uses z vars instead of random !important */
.modal-backdrop {
  backdrop-filter: blur(8px) saturate(150%);
  background: rgba(0, 0, 0, 0.4);
  z-index: var(--z-overlay);
}
.dark .modal-backdrop {
  background: rgba(0, 0, 0, 0.6);
}

.modal-overlay,
[data-headlessui-state],
.fixed.inset-0 {
  z-index: var(--z-overlay) !important;
}

.modal-content,
[role="dialog"],
.fixed.inset-0.flex.items-center.justify-center {
  z-index: var(--z-modal) !important;
}

/* Radix dialog crispness */
[data-radix-dialog-content] {
  backdrop-filter: none !important;
  filter: none !important;
  transform: translate(-50%, -50%) !important;
  will-change: auto !important;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Header sits under overlays but above base UI */
header {
  z-index: var(--z-header) !important;
}
header * {
  z-index: inherit !important;
}

/* =========================================
   7. HOMEPAGE HEADER (scoped)
========================================= */
.home-fixed-header {
  --home-header-h: 64px;
}
.home-fixed-header .site-header {
  position: fixed;
  top: 0; left: 0; right: 0;
  background: linear-gradient(
    180deg,
    rgba(14,165,233,0.14),
    rgba(2,132,199,0.18)
  );
  border-bottom: 1px solid rgb(var(--color-border));
  z-index: var(--z-header);
}
.dark.home-fixed-header .site-header {
  background: linear-gradient(
    180deg,
    rgba(14,165,233,0.22),
    rgba(2,132,199,0.28)
  );
  border-bottom: 1px solid rgba(255,255,255,0.08);
}